{% extends 'baseAdmin.html.twig' %}

{% block body %}
	{# Affichage des messages flash #}
	{% for message in app.flashes('success') %}
		<div class="alert alert-success">
			{{ message }}
		</div>
	{% endfor %}

	{# Barre de recherche #}
	<div class="d-flex justify-content-end mb-3 mr-3 mt-2">
		<form method="get" action="{{ path('app_reclamation_index') }}" class="d-flex">
			<input type="text" name="search" class="form-control form-control-sm" placeholder="Rechercher..." value="{{ search ?? '' }}">
			<button type="submit" class="btn btn-sm btn-secondary ms-2">üîç</button>
			<a href="{{ path('app_reclamation_index') }}" class="btn btn-danger">‚úñ</a>
		</form>
	</div>

	<a href="{{ path('insertReclamation') }}" class="btn btn-success">Ajouter une R√©clamation</a>
	<div class="row">
		<div class="col-lg-12">
			<div class="card">
				<div class="card-block">
					<h4 class="card-title">Liste des R√©clamations</h4>
					<h6 class="card-subtitle">Add class
						<code>.table</code>
					</h6>
					<div class="table-responsive">
						<table class="table">
							<tr>
								<th>Sujet</th>
								<th>Contenu</th>
								<th>Date</th>
								<th>Email Destinataire</th>
								<th>Client ID</th>
								<th>Statut</th>
								<th>Action</th>
							</tr>
							{% for reclamation in reclamations %}
								<tr>
									<td>{{ reclamation.sujetRec }}</td>
									<td>{{ reclamation.contenuRec }}</td>
									<td>{{ reclamation.dateRec|date('d-m-Y H:i') }}</td>
									<td>{{ reclamation.emailDes }}</td>
									<td>{{ reclamation.user ? reclamation.user.id : 'N/A' }}</td>
									<td class="text-center">
										{% if reclamation.statutRec == 'Pas trait√©e' %}
											<span class="badge badge-danger">{{ reclamation.statutRec }}</span>
										{% else %}
											<span class="badge badge-primary">{{ reclamation.statutRec }}</span>
										{% endif %}
									</td>
									<td class="text-center">
										{% if reclamation.statutRec == 'Pas trait√©e' %}
											<a href="{{ path('traiterReclamation', {'id': reclamation.id}) }}" class="btn btn-primary btn-sm">Traiter</a>
										{% else %}
											<span class="btn btn-secondary btn-sm disabled">D√©j√† trait√©e</span>
										{% endif %}
									</td>
								</tr>
							{% endfor %}
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	{# Affichage de la pagination #}
	<div class="d-flex justify-content-center">
		<div class="pagination">
			{{ knp_pagination_render(reclamations) }}
		</div>
	</div>


{% endblock %}
